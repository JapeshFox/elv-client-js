<!DOCTYPE html>
<html style="height: 100%;">
<head>
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
</head>
<body style="height: 100%;">
<script src="../../ElvClient-min.js"></script>
<script src="../../ElvFrameClient-min.js"></script>
<script type="text/javascript">
  const client = new ElvClient({
    contentSpaceId: "ispcePugFvmxjEkm96RXFdcVoX3ebZ5",
    hostname: "localhost",
    port: 8008,
    useHTTPS: false,
    ethHostname: "localhost",
    ethPort: 8545,
    ethUseHTTPS: false
  });

  let wallet = client.GenerateWallet();
  let signer = wallet.AddAccount({
    accountName: "Alice",
    privateKey: "0xbf092a5c94988e2f7a1d00d0db309fc492fe38ddb57fc6d102d777373389c5e6"
  });
  client.SetSigner({signer});


  window.addEventListener("message", async function(event) {
    console.log("\nReceived message: ");
    console.log(event.data);

    const responseMessage = await client.CallFromFrameMessage(event.data);
    console.log("\nSending response:");
    console.log(responseMessage);

    if (responseMessage) {
      document.getElementById("appFrame").contentWindow.postMessage(
        responseMessage,
        "*"
      );
    }
  });
</script>

<iframe width="1000px" height="1000px" id="appFrame" src="child.html"></iframe>
</body>
</html>
